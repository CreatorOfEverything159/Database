# Абакумов Б9119-02.03.03техпро

## Анализ ПО "Авиакасса"
Необходимо разработать систему, которая решает задачу автоматизации составления **расписания рейсов**; поиска и бронирования **билетов** на рейсы **пассажиром**.

В задачи оператора входит составление расписания рейсов. Чтобы добавить рейс в расписание оператору требуется указать следующие данные: аэропорт вылета, город вылета, аэропорт назначения, город назначения, дата вылета, время вылета, количество мест в самолете, номер рейса, цена за билет. Каждому аэропорту соответствует город. Информация об аэропорте и городе берется из [базы AITA](https://aeroportix.ru/kod-iata). В одном городе может быть несколько аэропортов. В рейсе не могут быть одинаковыми город вылета, город назначения, аэропорт вылета, аэропорт назначения.

Так же оператор может отменять рейсы, то есть исключать их из расписания. Рейс можно отменить не позже чем за 12 часов до даты и времени вылета. Если дата и время рейса совпадают с текущей, то рейс автоматически удаляется из расписания. Рейс отменяется автоматически за 12 часов до даты и времени вылета, если количество забранированных мест менее 40% от всего количество мест в самолете. Если рейс отменяется, то пассажиры, которые бронировали билеты на этот рейс, уведомляются.

Для бронирования билета пассажир узнает у оператора об актуальных рейсах. Актуальный рейс, это рейс, дата и время вылета которого позже текущей даты и времени. Его интересуют рейсы с конкретным городом вылета, городом назначения и датой вылета. Оператор предоставляет к выбору пассажиру свободные места в самолете. Чтобы забронировать билет на рейс пассажир должен заполнить форму, то есть предоставить свои ФИО, серию и номер паспорта, выбрать рейс, дату и время вылета, место в самолете. Место составляется из латинской буквы (A-D) и числа (1-25). Буква указывает на ряд, а число на место в ряду. Пассажир не может бронировать несколько билетов на один рейс. После бронирования пассажир получает билет со следующей информацией: ФИО пассажира, серия и номер паспорта, аэропорт вылета, город вылета, аэропорт назначения, город назначения, дата вылета, время вылета, место в самолете, номер рейса; количество свободных мест уменьшается на 1.

У нескольких рейсов может быть одинаковый номер рейса, аэропорт вылета, город вылета, аэропорт назначения, город назначения, количество мест, время вылета, но разная дата вылета. Аэропорт вылета не может совпадать с аэропортом назначения.

У нескольких билетов может быть одинаковые ФИО пассажира, аэропорт вылета, город вылета, аэропорт назначения, город назначения, дата вылета, время вылета, номер рейса, но разные места в самолете и серия и номер паспорта.

У нескольких пассажиров может быть одинаковые ФИО, но разный номер паспорта.

Пример расписания рейсов

| Номер рейса | Аэро-опрт вылета | Город вылета | Аэро-опрт назна-чения | Город назна-чения | Дата вылета | Время вылета | Коли-чествово мест |
| - | - | - | - | - | - | - | - |
| SU 5362 | VVO | Влади-восток | SVO | Москва | 02/02/ 2022 | 12:00 | 100 |
| SU 5363 | SVO | Москва | VVO | Влади-восток | 03/02/ 2022 | 19:00 | 100 |
| ... | ... | ... | ... | ... | ... | ... | ... |

**Рейс** включает в себя следующие параметры:
- Аэропорт вылета
- Город вылета
- Аэропорт назначения
- Город назначения
- Дата вылета
- Время вылета
- Количество мест в самолете
- Номер рейса

**Билет** на самолет состоит из:
- ФИО пассажира
- Аэропорт вылета
- Город вылета
- Аэропорт назначения
- Город назначения
- Дата вылета
- Время вылета
- Место в самолете
- Номер рейса
- Серия и номер паспорта

У **пассажира** есть:
- ФИО
- Серия паспорта
- Номер паспорта

---

- **Аэропорт вылета** и **аэропорт назначения** должны быть записаны по стандарту IATA — трёхбуквенный код на латинице, присваиваемый аэропортам мира Международной ассоциацией воздушного транспорта.
Пример:
	- SVO
	- VVO

- **Город вылет** и **город назначения** должны быть записаны с заглавной буквы на кирилице, через запятую написана страна с заглавной буквы на кирилице.
Пример:
	- Москва
	- Владивосток

- **Дата вылета** должна быть записана в формате ДД/ММ/ГГГГ, где ДД - число, ММ - месяц, ГГГГ - год от 2021 до 2023, / - разделительный символ.
Пример:
	- 01/01/2021
	- 31/12/2023
	
- **Время вылета** должно быть записано в формате ЧЧ:ММ, где ЧЧ - часы, ММ - минуты, : - разделительный символ.
Пример:
	- 00:00
	- 23:59

- **Количество мест** - количество мест в самолете от 10 до 100

- **Номер рейса** состоит из:
	- уникальный двухзначны индивидуальный идентификатор авиакомпании, который присваивает Международная ассоциация воздушного транспорта IATA
	- Число от 1 до 9999.
Пример:
	- Z9 5362
	- SU 1
	- 5N 999
	
- **Место в самолете** состоит из буквы ряда от A до D и порядкового номера места от 1 до 25.
Пример:
	- A1
	- D25
	
- **ФИО** от 2 до 3 слов на кирилице, каждое с заглавной буквы.
Пример:
	- Иванов Иван Иванович
	- Жень Шень
	
- **Номер паспорта** состоит из 8 цифр, не начиается с 0.
Пример:
	- 17583920
	- 56835915

## Группы пользователей:

**Пассажир** должен иметь возможность решать следующие задачи:
- Просматривать расписание рейсов
- Бронировать билет на рейс
- Получать данные о всех своих забронированных билетах

**Оператор** должен иметь возможность решать следующие задачи:
- Добавлять новые рейсы в расписание
- Отменять рейсы
- Редактировать данные существующих рейсов
- Просматривать каким рейсом летят какие пассажиры

## Инфологическая модель
### Объекты

Рассмотрим информационный объект **рейс**.

Рейс так же называют авиарейсом. Этот объект используется для составления распиания рейсов оператором и при бронировании пассажиром билета.

Рейс обладает следующими атрибутами:

1. **Аэропорт вылета**
- Аэропорт вылета - уникальный идентификатор аэропорта, не совпадает с аэропортом назначения.
- Берется оператором из существующей базы IATA.
- Тип атрибута: текстовый.
- Используется как идентификатор аэропорта.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

2. **Город вылета**
- Город вылета - идентификатор города вылета, не совпадает с городом назначения.
- Берется опертатором из существующей базы IATA из соответсвия и городом вылета.
- Тип атрибута: текстовый.
- Используется как идентификатор города вылета.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

3. **Аэропорт назначения**
- Аэропорт вылета - уникальный идентификатор аэропорта, не совпадает с аэропортом вылета.
- Берется оператором из существующей базы IATA.
- Тип атрибута: текстовый.
- Используется как идентификатор аэропорта.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

4. **Город назначения**
- Город назначения - идентификатор города назначения, не совпадает с городом вылета.
- Берется опертатором из существующей базы IATA из соответсвия и городом назначения.
- Тип атрибута: текстовый.
- Используется как идентификатор города назначения.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

5. **Дата вылета**
- Дата вылета - день, месяц и год отправления авиарейса.
- Выбирается оператором.
- Тип атрибута: последовательность вида ДД/ММ/ГГГГ, где ДД - число, ММ - месяц, ГГГГ - год от 2021 до 2023, / - разделительный символ.
- Используется для составления расписания.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

6. **Время вылета**
- Время вылета - время отправления авиарейса.
- Выбирается оператором.
- Тип атрибута: последовательность вида ЧЧ:ММ, где ЧЧ - часы, ММ - минуты, : - разделительный символ.
- Используется для составления расписания.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

7. **Количество мест в самолете**
- Количество мест в самолете - количество пассажиров, которые могут поместиться в самолете.
- Выбирается оператором.
- Тип атрибута: натуральные числа из промежутка [10; 100].
- Используется для определения максимального числа пассажиров, помещающихся в самолет.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

8. **Номер рейса**
- Номер рейса - уникальный идентификатор рейса.
- Выбирается оператором.
- Тип атрибута: текстовый.
- Используется как идентификатор рейса.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

**Взаимосвязи атрибутов объекта:**
![[./img/БД_рейс.png]]

Рассмотрим информационный объект **билет**.

Билет так же называют авиабилетом. Этот объект предоставляется пассажиру.

Билет обладает следующими атрибутами:
1. **Аэропорт вылета**
- Аэропорт вылета - уникальный идентификатор аэропорта, не совпадает с аэропортом назначения.
- Берется оператором из существующей базы IATA.
- Тип атрибута: текстовый.
- Используется как идентификатор аэропорта.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

2. **Город вылета**
- Город вылета - идентификатор города вылета.
- Берется опертатором из существующей базы IATA из соответсвия и городом вылета.
- Тип атрибута: текстовый.
- Используется как идентификатор города вылета.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

3. **Аэропорт назначения**
- Аэропорт вылета - уникальный идентификатор аэропорта, не совпадает с аэропортом вылета.
- Берется оператором из существующей базы IATA.
- Тип атрибута: текстовый.
- Используется как идентификатор аэропорта.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

4. **Город назначения**
- Город назначения - идентификатор города назначения.
- Берется опертатором из существующей базы IATA из соответсвия и городом назначения.
- Тип атрибута: текстовый.
- Используется как идентификатор города назначения.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

5. **Дата вылета**
- Дата вылета - день, месяц и год отправления авиарейса.
- Выбирается оператором.
- Тип атрибута: последовательность вида ДД/ММ/ГГГГ, где ДД - число, ММ - месяц, ГГГГ - год от 2021 до 2023, / - разделительный символ.
- Используется для составления расписания.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

6. **Время вылета**
- Время вылета - время отправления авиарейса.
- Выбирается оператором.
- Тип атрибута: последовательность вида ЧЧ:ММ, где ЧЧ - часы, ММ - минуты, : - разделительный символ.
- Используется для составления расписания.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

7. **Место в самолете**
- Место в самолете - указтель на место в самолете.
- Выбирается пассажиром.
- Тип атрибута: строка типа LN, где L - латинская буква из множества [A, B, C, D], N - число и промежутка [1; 25].
- Используется для определения максимального числа пассажиров, помещающихся в самолет.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

8. **Номер рейса**
- Номер рейса - уникальный идентификатор рейса.
- Выбирается оператором.
- Тип атрибута: текстовый.
- Используется как идентификатор рейса.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

9. **ФИО**
- ФИО - Фаимилия имя отчество пассажира.
- Берется из паспортных данных.
- Тип атрибута: текстовый.
- Используется для идентификации пассажира.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

10. **Серия и номер паспорта**
- Серия и номер паспорта - это уникальный идентификатор пассажира.
- Берется из паспортных данных.
- Тип атрибута: последовательность вида #### ######, где # - натуральное число из промежутка [0; 9].
- Используется для идентификации пассажира.
- Оператор имеет доступ для чтения и записи. Пассажир имеет доступ только для чтения.

**Взаимосвязи атрибутов объекта:**
![[./img/БД_билет.png]]

Рассмотрим информационный объект **пассажир**.

Пассажира так же называют авиапассажиром.

Пассажир обладает следующими атрибутами:
1. **ФИО**
- ФИО - Фаимилия имя отчество пассажира.
- Берется из паспортных данных.
- Тип атрибута: текстовый.
- Используется для идентификации пассажира.
- Оператор имеет доступ для чтения.

2. **Серия и номер паспорта**
- Серия и номер паспорта - уникальный идентификатор.
- Берется из паспортных данных.
- Тип атрибута: числовой.
- Используется для идентификации пассажира.
- Оператор имеет доступ для чтения.

**Взаимосвязи атрибутов объекта:**
![[./img/БД_пассажир.png]]

### Задачи

Задачи, которые решает **оператор**:

- Добавление нового рейса в расписание, отмена рейса в расписании, редактирование существующего рейса:
![[./img/БД_добавление_рейса.png]]

- Просматривать каким рейсом летят какие пассажиры
![[./img/БД_просмотр_рейса_пассажир.png]]


Задачи, которые решает **пассажир**:

- Просматривать расписание рейсов
![[./img/БД_добавление_рейса.png]]

- Бронировать билет на рейс
![[./img/БД_рейс_билет.png]]

- Получать данные о всех своих забронированных билетах
![[БД_билет_данные.png]]


Информационному объекту **рейс** ставим в соответствие таблицу:

| Номер рейса | Аэро-порт вылета | Город вылета | Аэро-порт назна-чения | Город назна-чения | Дата вылета | Время вылета | Коли-чествово мест |
| - | - | - | - | - | - | - | - |

Приводим к первой нормальной форме:

1. Все значения атрибутов уже атомарны. Разбивать наотдельные атрибуы дату вылета на "День", "Месяц" и "Год" и время вылета на "Часы" и "Минуты" не нужно, так как не требуется решать задачи, где они используются отдельно.
2. Выделяем первичный ключ, для этого анализируем схему взаимосвязей объекта рейс. Выделить простой ключ не получится, так как нет атрибута, от которого зависят все остальные.

Выделим составной ключ: "Номер рейса" + "Дата вылета".
Приведение к первой нормальной форме завершено.

Приводим ковторой нормальной форме:
